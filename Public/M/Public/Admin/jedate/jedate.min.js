/** 
 @Name : jeDate v2.0 日期控件
 @Author: chne guojun
 @Date: 2016-2-17
 @QQ群：516754269
 @Site：https://github.com/singod/jeDate
 */
!function(a){var b,c,d,e={},f=document,g="#jedatebox",h=e.query=function(){function a(l,m){var n,o,p,q,r,s;if(m=m||document,!/^[\w\-_#]+$/.test(l)&&m.querySelectorAll)return b(m.querySelectorAll(l));if(-1<l.indexOf(",")){for(n=l.split(/,/g),o=[],p=0,q=n.length;q>p;++p)o=o.concat(a(n[p],m));return k(o)}if(n=l.match(e),o=n.pop(),q=(o.match(g)||i)[1],r=!q&&(o.match(f)||i)[1],p=!q&&(o.match(h)||i)[1],o=l.match(/\[(?:[\w\-_][^=]+)=(?:[\'\[\]\w\-_]+)\]/g),r&&!o&&!p&&m.getElementsByClassName)p=b(m.getElementsByClassName(r));else{if(p=!q&&b(m.getElementsByTagName(p||"*")),r&&(p=d(p,"className",RegExp("(^|\\s)"+r+"(\\s|$)"))),q)return(n=m.getElementById(q))?[n]:[];if(o)for(q=0;q<o.length;q++)r=(o[q].match(j)||i)[1],s=(o[q].match(j)||i)[2],s=s.replace(/\'/g,"").replace(/\-/g,"\\-").replace(/\[/g,"\\[").replace(/\]/g,"\\]"),p=d(p,r,RegExp("(^"+s+"$)"))}return n[0]&&p[0]?c(n,p):p}function b(a){try{return Array.prototype.slice.call(a)}catch(b){for(var c=[],d=0,e=a.length;e>d;++d)c[d]=a[d];return c}}function c(a,b,d){var e,j,k,l,m,n,o,p,q=a.pop();if(">"===q)return c(a,b,!0);for(l=[],m=-1,n=(q.match(g)||i)[1],o=!n&&(q.match(f)||i)[1],q=!n&&(q.match(h)||i)[1],p=-1,q=q&&q.toLowerCase();e=b[++p];){j=e.parentNode;do if(k=(k=(k=!q||"*"===q||q===j.nodeName.toLowerCase())&&(!n||j.id===n))&&(!o||RegExp("(^|\\s)"+o+"(\\s|$)").test(j.className)),d||k)break;while(j=j.parentNode);k&&(l[++m]=e)}return a[0]&&l[0]?c(a,l):l}function d(a,b,c){for(var d,e=-1,f=-1,g=[];d=a[++e];)c.test(d.getAttribute(b))&&(g[++f]=d);return g}var e=/(?:[\*\w\-\\.#]+)+(?:\[(?:[\w\-_][^=]+)=(?:[\'\[\]\w\-_]+)\])*|\*|>/gi,f=/^(?:[\w\-_]+)?\.([\w\-_]+)/,g=/^(?:[\w\-_]+)?#([\w\-_]+)/,h=/^([\w\*\-_]+)/,i=[null,null,null],j=/\[([\w\-_][^=]+)=([\'\[\]\w\-_]+)\]/,k=function(){var a=+new Date,b=function(){var b=1;return function(c){var d=c[a],e=b++;return d?!1:(c[a]=e,!0)}}();return function(c){for(var d,e=c.length,f=[],g=-1,h=0;e>h;++h)d=c[h],b(d)&&(f[++g]=d);return a+=1,f}}();return a}();e.each=function(a,b){for(var c=0,d=a.length;d>c&&b(c,a[c])!==!1;c++);},e.extend=function(){var a,b=function e(a,b){for(var c in a)if(a.hasOwnProperty(c)){if(a[c]instanceof Object&&b[c]instanceof Object&&e(a[c],b[c]),b.hasOwnProperty(c))continue;b[c]=a[c]}},c={},d=arguments;if(!d.length)return{};for(a=d.length-1;a>=0;a--)b(d[a],c);return d[0]=c,c},e.trim=function(a){return a=a||"",a.replace(/^\s|\s$/g,"").replace(/\s+/g," ")},e.attr=function(a,b,c){return"string"==typeof b&&"undefined"==typeof c?a.getAttribute(b):(a.setAttribute(b,c),this)},e.stopmp=function(b){return b=b||a.event,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,this},e.hasClass=function(a,b){return a=a||{},new RegExp("\\b"+b+"\\b").test(a.className)},e.addClass=function(a,b){return a=a||{},e.hasClass(a,b)||(a.className+=" "+b),a.className=e.trim(a.className),this},e.removeClass=function(a,b){return a=a||{},e.hasClass(a,b)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)"),"")),this},e.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},e.stopMosup=function(a,b){"mouseup"!==a&&e.on(b,"mouseup",function(a){e.stopmp(a)})},e.html=function(a,b){return"undefined"!=typeof b||void 0!==b&&1===a.nodeType?(a.innerHTML=b,this):a.innerHTML},e.text=function(a,b){if(void 0===b||1!==a.nodeType){var c=document.all?a.innerText:a.textContent;return c}return document.all?a.innerText=b:a.textContent=b,this},e.val=function(a,b){return void 0===b||1!==a.nodeType?a.value:(a.value=b,this)},e.scroll=function(a){return a=a?"scrollLeft":"scrollTop",f.body[a]|f.documentElement[a]},e.winarea=function(a){return f.documentElement[a?"clientWidth":"clientHeight"]},e.type=function(a,b){var c=b.replace(/\b(\w)|\s(\w)/g,function(a){return a.toUpperCase()});return Object.prototype.toString.call(a)==="[object "+c+"]"},e.parse=function(a,b,c){a=a.concat(b);var c=c;return c.replace(/YYYY|MM|DD|hh|mm|ss/g,function(){return a.index=0|++a.index,e.digit(a[a.index])})},e.nowDate=function(a,b){var c=new Date(0|a?function(a){return 864e5>a?+new Date+864e5*a:a}(parseInt(a)):+new Date);return e.parse([c.getFullYear(),c.getMonth()+1,c.getDate()],[c.getHours(),c.getMinutes(),c.getSeconds()],b)},e.montharr=[1,2,3,4,5,6,7,8,9,10,11,12],e.isValHtml=function(a){return/textarea|input/.test(a.tagName.toLocaleLowerCase())},e.weeks=["日","一","二","三","四","五","六"],e.festival=function(a,b){var c="";switch(a){case"01.01":c="元旦";break;case"02.14":c="情人";break;case"03.08":c="妇女";break;case"04.05":c="清明";break;case"05.01":c="劳动";break;case"06.01":c="儿童";break;case"08.01":c="建军";break;case"09.10":c="教师";break;case"10.01":c="国庆";break;case"12.24":c="平安";break;case"12.25":c="圣诞";break;default:c=b}return c},e.digit=function(a){return 10>a?"0"+(0|a):a},e.shdeCell=function(a){h(g)[0].style.display=a?"none":"block"},b={dateCell:"#dateval",format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",isinitVal:!1,isTime:!1,isClear:!0,festival:!1,zIndex:999,marks:null,choosefun:function(){},clearfun:function(){},okfun:function(){}},c=function(a){var c=this,d=JSON.parse(JSON.stringify(b));c.config=e.extend(d,a),c.init()},d=function(a){return new c(a||{})},c.prototype={init:function(){var a,b,c,d,i=this,j=i.config,k=h(j.dateCell)[0],l=window.event,m=f.createElement("div");h(g)[0]||(m.className=m.id=g.replace("#",""),m.style.zIndex=j.zIndex,f.body.appendChild(m));try{c=l.target||l.srcElement||{}}catch(n){c={}}if(a=j.dateCell?h(j.dateCell)[0]:c,d=e.nowDate(null,j.format),j.isinitVal&&(""==(e.val(k)||e.text(k))?e.isValHtml(k)?e.val(k,d):e.text(k,d):e.isValHtml(k)?e.val(k):e.text(k)),l&&c.tagName){if(!a||a===e.elem)return;e.stopMosup(l.type,a),e.stopmp(l),i.setHtml(j,k)}else b=j.event||"click",e.each((0|a.length)>0?a:[a],function(a,c){e.stopMosup(b,i),e.on(c,b,function(a){e.stopmp(a),c!==e.elem&&i.setHtml(j,k)})})},setHtml:function(a,b){var c,d,f,i,j,k,l,m,n,o,p=this,q="",r=new Date,s=e.nowDate(null,a.format),t="YYYY-MM"==a.format.match(/\w+|d+/g).join("-")?!0:!1,u=a.isinitVal?e.isValHtml(b)?e.val(b):e.text(b):""==(e.val(b)||e.text(b))?s:e.isValHtml(b)?e.val(b):e.text(b);if(c=""!=e.val(b)||""!=e.text(b)?u.match(/\d+/g):[r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()],d=t?'<div class="jedateym" style="width:100%;"><i class="prev triangle ymprev"></i><span class="jedateyy"><em class="jedateyearmonth"></em></span><i class="next triangle ymnext"></i></div>':'<div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" data-ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" data-ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div>',f='<div class="jedatetop">'+d+"</div>",i=t?'<ul class="jedaym"></ul>':'<div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul><p><span class="jedateymchle">&#8592;</span><span class="jedateymchri">&#8594;</span><span class="jedateymchok">关闭</span></p></div>',j='<ol class="jedaol"></ol><ul class="jedaul"></ul>',k=t?'<div class="botflex jedatebtn"><span class="jedateclear" style="width:31%;">清空</span><span class="jedatetodaymonth" style="width:31%;">本月</span><span class="jedateok" style="width:31%;">确认</span></div>':'<ul class="botflex jedatehms"><li><em data-hms="24"></em><i>:</i></li><li><em data-hms="60"></em><i>:</i></li><li><em data-hms="60"></em></li></ul><div class="botflex jedatebtn"><span class="jedateclear" style="width:31%;">清空</span><span class="jedatetodaymonth" style="width:31%;">今天</span><span class="jedateok" style="width:31%;">确认</span></div>',l='<div class="jedatebot">'+k+"</div>",m=t?f+i+l:f+i+j+l+'<div class="jedateprophms"></div>',e.html(h(g)[0],m),a.isClear?"":h(g+" .jedatebot .jedateclear")[0].style.display="none",a.isTime?(n=""!=e.val(b)||""!=e.text(b)?[c[3],c[4],c[5]]:[r.getHours(),r.getMinutes()+1,r.getSeconds()],e.each(h(g+" .jedatebot .jedatehms em"),function(a,b){e.html(b,e.digit(n[a]))})):(t||(h(g+" .jedatebot .jedatehms")[0].style.display="none"),h(g+" .jedatebot .jedatebtn")[0].style.width="100%"),t)e.html(h(g+" .jedaym")[0],p.onlyYMStr(c[0],c[1])),e.text(h(g+" .jedateym .jedateyearmonth")[0],c[0]+"年"+e.digit(c[1])+"月"),p.onlyYMevents(p,a,b,c);else{for(o=0;o<e.weeks.length;o++)q+='<li class="weeks" data-week="'+e.weeks[o]+'">'+e.weeks[o]+"</li>";e.html(h(g+" .jedaol")[0],q),p.getDateStr(c[0],c[1],c[2]),p.chooseYM(p,a,b,c)}e.shdeCell(!1),p.orien(h(g)[0],b),p.events(p,a,b,c)},onlyYMStr:function(a,b){var c="";return e.each(e.montharr,function(d,f){c+="<li "+(b==f?'class="action"':"")+' data-onym="'+a+"-"+e.digit(f)+'">'+a+"年"+e.digit(f)+"月</li>"}),c},onlyYMevents:function(a,b,c,d){var f=h(g+" .jedateym .ymprev")[0],i=h(g+" .jedateym .ymnext")[0],j=parseInt(d[0]),k=parseInt(d[1]);e.each([f,i],function(i,l){e.on(l,"click",function(i){e.stopmp(i);var m=l==f?j-=1:j+=1;e.html(h(g+" .jedaym")[0],a.onlyYMStr(m,k)),a.events(a,b,c,d)})})},orien:function(a,b,c){var d,f=b.getBoundingClientRect();leris=f.right+a.offsetWidth/1.5>=e.winarea(1)?f.right-a.offsetWidth:f.left+(c?0:e.scroll(1)),d=f.bottom+a.offsetHeight/1.5<=e.winarea()?f.bottom-1:f.top>a.offsetHeight/1.5?f.top-a.offsetHeight+1:e.winarea()-a.offsetHeight,a.style.left=leris+"px",a.style.top=Math.max(d+(c?0:e.scroll())+1,1)+"px"},getDateStr:function(a,b,c){function d(a,b,c){var d=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1};return e.type(U.marks,"array")&&U.marks.length>0&&d(U.marks,a+"-"+b+"-"+c)?'<i class="marks"></i>':""}function f(a,b){var c=0==a%4&&0!=a%100||0==a%400?29:28;return[31,c,31,30,31,30,31,31,30,31,30,31][b-1]}function i(a,b){return parseInt(new Date(a,b-1,0).getDate())}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=this,U=T.config,V="";for(b=e.digit(b),j=new Date,j.getFullYear(),j.getMonth()+1,e.text(h(g+" .jedateyear")[0],a+"年").attr(h(g+" .jedateyear")[0],"data-year",a),e.text(h(g+" .jedatemonth")[0],b+"月").attr(h(g+" .jedatemonth")[0],"data-month",b),k=function(a,b){return U.festival?e.festival(a,b):b},l=function(a){var b=a.split(" ");return b[0].split("-")},f(a,b),m=new Date(a,parseInt(b)-1,1).getDay(),n=0!=m?m:m+7,o=i(a,b),p=i(a,parseInt(b)+1),q=1,r=l(U.minDate),s=l(U.maxDate),t=p,new Date(a,b,c),u=new Date(a,b,1),v=new Date(a,b,p),w=new Date(r[0],r[1],r[2]),x=new Date(s[0],s[1],s[2]),y=w.getDate(),w>v?q=parseInt(p)+1:w>=u&&v>=w&&(q=y),x&&(z=x.getDate(),u>x?t=0:x>=u&&v>=x&&(t=z)),A=n-1;A>=0;A--)E=e.digit(o-A),1==b?(B=parseInt(a)-1,C=13):(B=a,C=b),F=parseInt(B.toString()+e.digit(parseInt(C)-1).toString()+E.toString()),G=parseInt(r[0].toString()+e.digit(r[1]).toString()+e.digit(r[2]).toString()),H=parseInt(s[0].toString()+e.digit(s[1]).toString()+e.digit(s[2]).toString()),D=F>=G&&H>=F?"prevdate":"disabled",V+="<li class='"+D+"' data-y='"+B+"' data-m='"+(parseInt(C)-1)+"' data-d='"+E+"'>"+k(parseInt(C)-1+"."+E,E)+d(B,parseInt(C)-1,E)+"</li>";for(I=1;q>I;I++)I=e.digit(I),V+='<li class="disabled" data-y="'+a+'" data-m="'+b+'" data-d="'+I+'">'+k(b+"."+I,I)+d(a,b,I)+"</li>";for(J=q;t>=J;J++)J=e.digit(J),K=c==J?"action":"",V+='<li class="'+K+'" data-y="'+a+'" data-m="'+b+'" data-d="'+J+'">'+k(b+"."+J,J)+d(a,b,J)+"</li>";for(L=t+1;p>=L;L++)L=e.digit(L),V+='<li class="disabled" data-y="'+a+'" data-m="'+b+'" data-d="'+L+'">'+k(b+"."+L,L)+d(a,b,L)+"</li>";for(M=42-n-f(a,b),N=1;M>=N;N++)N=e.digit(N),b>=12?(O=parseInt(a)+1,P=0):(O=a,P=b),R=parseInt(O.toString()+e.digit(parseInt(P)+1).toString()+e.digit(N).toString()),S=parseInt(r[0].toString()+e.digit(r[1]).toString()+e.digit(r[2]).toString()),H=parseInt(s[0].toString()+e.digit(s[1]).toString()+e.digit(s[2]).toString()),Q=H>=R&&R>=S?"nextdate":Q="disabled",V+="<li class='"+Q+"' data-y='"+O+"' data-m='"+(parseInt(P)+1)+"' data-d='"+N+"'>"+k(parseInt(P)+1+"."+N,N)+d(O,parseInt(P)+1,N)+"</li>";e.html(h(g+" .jedaul")[0],V),e.attr(h(g+" .monthprev")[0],"data-y",e.digit(parseInt(b)-1)),e.attr(h(g+" .monthnext")[0],"data-y",e.digit(parseInt(b)+1))},events:function(a,b,c,d){var f=h(g+" .yearprev")[0],i=h(g+" .yearnext")[0],j=h(g+" .monthprev")[0],k=h(g+" .monthnext")[0],l=new Date,m=h(g+" .jedateyear")[0],n=h(g+" .jedatemonth")[0],o="YYYY-MM"==b.format.match(/\w+|d+/g).join("-")?!0:!1;o?(e.each(h(g+" .jedaym li"),function(a,d){e.on(d,"click",function(a){var f,i;e.stopmp(a),f=e.attr(d,"data-onym").match(/\w+|d+/g),i=e.parse([f[0],f[1],1],[0,0,0],b.format),e.isValHtml(c)?e.val(c,i):e.text(c,i),e.html(h(g)[0],""),e.shdeCell(!0)})}),e.on(h(g+" .jedatebot .jedatetodaymonth")[0],"click",function(){var a=[l.getFullYear(),l.getMonth()+1,l.getDate()],d=e.parse([a[0],a[1],0],[0,0,0],b.format);e.isValHtml(c)?e.val(c,d):e.text(c,d),e.html(h(g)[0],""),e.shdeCell(!0),(e.type(b.choosefun,"function")||null!=b.choosefun)&&b.choosefun(d)})):(e.each([f,i],function(g,h){e.on(h,"click",function(g){var i,j,k;e.stopmp(g),i=parseInt(e.attr(m,"data-year")),j=parseInt(e.attr(n,"data-month")),h==f?i-=1:i+=1,k=l.toLocaleDateString()==i+"/"+j+"/"+l.getDate()?d[2]:1,a.getDateStr(i,j,k),a.chooseDays(a,b,c)})}),e.each([j,k],function(f,g){e.on(g,"click",function(f){var h,i,k;e.stopmp(f),h=parseInt(e.attr(m,"data-year")),i=parseInt(e.attr(n,"data-month")),g==j?1==i?(h-=1,i=12):i-=1:12==i?(h+=1,i=1):i+=1,k=l.toLocaleDateString()==h+"/"+i+"/"+l.getDate()?d[2]:1,a.getDateStr(h,i,k),a.chooseDays(a,b,c)})}),e.each(h(g+" .jedatebot .jedatehms em"),function(a,b){e.on(b,"click",function(){var c,d,f="",i=h(g+" .jedateprophms")[0],j=e.attr(b,"data-hms"),k=["小时","分钟","秒数"],l=function(){e.removeClass(i,24==j?"jedateh":"jedatems"),e.html(i,"")};for(f+='<div class="jedatehmstitle">'+k[a]+'<div class="jedatehmsclose">&times;</div></div>',d=0;j>d;d++)d=e.digit(d),c=e.text(b)==d?"action":"",f+='<p class="'+c+'">'+d+"</p>";e.removeClass(i,24==j?"jedatems":"jedateh").addClass(i,24==j?"jedateh":"jedatems"),e.html(i,f),e.each(h(g+" .jedateprophms p"),function(a,c){e.on(c,"click",function(){e.html(b,e.digit(e.text(c))),l()})}),e.each(h(g+" .jedateprophms .jedatehmstitle"),function(a,b){e.on(b,"click",function(){l()})})})}),e.on(h(g+" .jedatebot .jedatetodaymonth")[0],"click",function(){var d=[l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()],f=e.parse([d[0],d[1],d[2]],[d[3],d[4],d[5]],b.format);a.getDateStr(d[0],d[1],d[2]),e.isValHtml(c)?e.val(c,f):e.text(c,f),e.html(h(g)[0],""),e.shdeCell(!0),(e.type(b.choosefun,"function")||null!=b.choosefun)&&b.choosefun(f)})),e.on(h(g+" .jedatebot .jedateclear")[0],"click",function(){var a=e.isValHtml(c)?e.val(c):e.text(c);e.isValHtml(c)?e.val(c,""):e.text(c,""),e.html(h(g)[0],""),e.shdeCell(!0),""!=a&&(e.type(b.clearfun,"function")||null!=b.clearfun)&&b.clearfun(a)}),e.on(h(g+" .jedatebot .jedateok")[0],"click",function(f){var i,j,k,l,p;e.stopmp(f),i=o?h(g+" .jedaym li"):h(g+" .jedaul li"),o?(p=""!=e.val(c)||""!=e.text(c)?e.attr(h(g+" .jedaym .action")[0],"data-onym").match(/\w+|d+/g):"",l=""!=e.val(c)||""!=e.text(c)?e.parse([p[0],p[1],1],[0,0,0],b.format):""):(j=[],k=[parseInt(e.attr(m,"data-year")),parseInt(e.attr(n,"data-month")),d[2]],e.each(h(g+" .jedatehms em"),function(a,b){j.push(e.text(b))}),l=""!=e.val(c)||""!=e.text(c)?e.parse([k[0],k[1],k[2]],[j[0],j[1],j[2]],b.format):"",a.getDateStr(k[0],k[1],k[2])),e.each(i,function(a,b){"action"==e.attr(b,"class")&&(e.isValHtml(c)?e.val(c,l):e.text(c,l))}),e.html(h(g)[0],""),e.shdeCell(!0),""!=l&&(e.type(b.okfun,"function")||null!=b.okfun)&&b.okfun(l)}),e.on(document,"click",function(){e.shdeCell(!0),e.html(h(g)[0],"")}),e.on(h(g)[0],"click",function(a){e.stopmp(a)}),a.chooseDays(a,b,c)},chooseYM:function(a,b,c,d){function f(a){var b="";return e.each(new Array(15),function(c){if(7===c){var d=e.attr(o,"data-year");b+="<li "+(d==a?'class="action"':"")+' data-y="'+a+'">'+a+"年</li>"}else b+='<li data-y="'+(a-7+c)+'">'+(a-7+c)+"年</li>"}),b}function i(a,b){var c="";12==b?(e.each(e.montharr,function(a,b){var d=e.attr(p,"data-month"),b=e.digit(b);c+="<li "+(d==b?'class="action"':"")+' data-m="'+b+'">'+b+"月</li>"}),e.each([q,r],function(a,b){b.style.display="none"})):(c=f(a),e.each([q,r],function(a,b){b.style.display="block"})),e.removeClass(l,12==b?"jedatesety":"jedatesetm").addClass(l,12==b?"jedatesetm":"jedatesety"),e.html(h(g+" .jedatetopym .ymdropul")[0],c),l.style.display="block"}function j(f){e.each(h(g+" .ymdropul li"),function(g,h){e.on(h,"click",function(){var g=e.attr(this,"data-y"),h=e.attr(p,"data-month");e.attr(f,"data-year",g),e.html(f,g),l.style.display="none",a.getDateStr(g,h,d[2]),a.chooseDays(a,b,c)})})}var k,l=h(g+" .jedatetopym")[0],m=h(g+" .jedateyy")[0],n=h(g+" .jedatemm")[0],o=h(g+" .jedateyy .jedateyear")[0],p=h(g+" .jedatemm .jedatemonth")[0],q=h(g+" .jedateymchri")[0],r=h(g+" .jedateymchle")[0];e.on(m,"click",function(){var a=parseInt(e.attr(m,"data-ym")),b=parseInt(e.attr(o,"data-year"));i(b,a),j(o)}),e.on(n,"click",function(){var f=parseInt(e.attr(n,"data-ym")),j=parseInt(e.attr(o,"data-year"));i(j,f),e.each(h(g+" .ymdropul li"),function(f,g){e.on(g,"click",function(){var f=e.attr(o,"data-year"),g=e.attr(this,"data-m");e.attr(p,"data-month",g),e.html(p,g),l.style.display="none",a.getDateStr(f,g,d[2]),a.chooseDays(a,b,c)})})}),e.on(h(g+" .jedateymchok")[0],"click",function(a){e.stopmp(a),l.style.display="none"}),k=parseInt(e.attr(o,"data-year")),e.each([r,q],function(a,b){e.on(b,"click",function(b){e.stopmp(b),0==a?k-=15:k+=15;var c=f(k);e.html(h(g+" .jedatetopym .ymdropul")[0],c),j(o)})})},chooseDays:function(a,b,c){e.each(h(g+" .jedaul li"),function(d,f){e.on(f,"click",function(d){var i,j,k,l,m;e.hasClass(f,"disabled")||(e.stopmp(d),i=[],e.each(h(g+" .jedatehms em"),function(a,b){i.push(e.text(b))}),j=0|parseInt(e.attr(f,"data-y")),k=0|parseInt(e.attr(f,"data-m")),l=0|parseInt(e.attr(f,"data-d")),m=e.parse([j,k,l],[i[0],i[1],i[2]],b.format),a.getDateStr(j,k,l),e.isValHtml(c)?e.val(c,m):e.text(c,m),e.html(h(g)[0],""),e.shdeCell(!0),(e.type(b.choosefun,"function")||null!=b.choosefun)&&b.choosefun(m))})})}},e.getPath=function(){var a=document.scripts,b=a[a.length-1].src;return b.substring(0,b.lastIndexOf("/")+1)}(),e.creatlink=function(a){var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=e.getPath+"skin/"+a+".css",b.id="jeDateSkin",h("head")[0].appendChild(b),b=null},e.creatlink("jedate"),d.skin=function(a){h("#jeDateSkin")[0].parentNode.removeChild(h("#jeDateSkin")[0]),e.creatlink(a)},d.now=function(a){var b,c,d,e=new Date;return e.setDate(e.getDate()+a),b=e.getFullYear(),c=e.getMonth()+1,d=e.getDate(),b+"-"+c+"-"+d},"function"==typeof define?define(function(){return d}):window.jeDate=d}(window);
